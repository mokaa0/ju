<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wallet Required</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body class="landing">
  <div class="hero">
    <img src="data:image/jpeg;base64,...." alt="Wallet Required" class="hero-img"/>
  </div>
  <div class="panel">
    <h1>Wallet Required</h1>
    <p>You need to create a wallet to continue.</p>
    <button id="createBtn" class="primary">
      <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
        <path d="M2 7a2 2 0 0 1 2-2h16a1 1 0 0 1 1 1v3h-7a3 3 0 0 0 0 6h7v3a1 1 0 0 1-1 1H4a2 2 0 0 1-2-2V7z"/>
        <path d="M17 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0z"/>
      </svg>
      Create Wallet
    </button>
    <p class="hint">A password and transfer number will be generated for you.</p>
  </div>
  <script src="app.js"></script>
</body>
</html>



-


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wallet Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body class="dashboard">
  <header class="topbar">
    <div class="brand"><span class="badge">W</span> Wallet</div>
    <nav class="tabs">
      <button data-tab="home" class="tab active">Home</button>
      <button data-tab="products" class="tab">Products</button>
      <button data-tab="discount" class="tab">Discount</button>
      <button data-tab="contact" class="tab">Contact</button>
    </nav>
  </header>

  <main>
    <!-- Home -->
    <section id="home" class="view active">
      <div class="balance-card">
        <div class="label">Balance</div>
        <div class="balance"><span id="balance">0</span>$</div>
        <div class="transfer-line">Transfer number: <code id="transfer"></code></div>
        <div class="actions">
          <button id="sendBtn" class="primary">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
              <path d="M4 4l16 8-16 8V4z"/>
            </svg>
            Send
          </button>
        </div>
      </div>
    </section>

    <!-- Products -->
    <section id="products" class="view">
      <div id="itemsGrid" class="grid"></div>
      <div id="buyModal" class="modal">
        <div class="modal-body">
          <h3>Buy Product</h3>
          <div class="row">
            <label>Quantity</label>
            <input type="number" id="buyQty" min="1" value="1">
          </div>
          <div class="row">
            <button id="confirmBuy" class="primary">Confirm</button>
            <button id="cancelBuy" class="ghost">Cancel</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Discount -->
    <section id="discount" class="view">
      <h3>Discount Codes</h3>
      <p>Coming soon...</p>
    </section>

    <!-- Contact -->
    <section id="contact" class="view">
      <h3>Contact</h3>
      <p>Email: support@example.com</p>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>




body {
  font-family: 'Cairo', sans-serif;
  margin: 0;
  background: #111;
  color: #eee;
}

button {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
}

button.primary {
  background: #0a84ff;
  color: white;
}

button.ghost {
  background: transparent;
  color: #aaa;
  border: 1px solid #444;
}

.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #1a1a1a;
  padding: 10px 20px;
}

.brand {
  font-weight: 700;
  font-size: 1.2em;
}

.tabs .tab {
  background: none;
  border: none;
  color: #eee;
  margin: 0 6px;
  cursor: pointer;
}

.tabs .tab.active {
  color: #0a84ff;
}

.view { display: none; padding: 20px; }
.view.active { display: block; }

.balance-card {
  background: #222;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
}
.balance {
  font-size: 2em;
  font-weight: 800;
  margin: 10px 0;
}
.grid {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}
.modal {
  display: none;
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.8);
  justify-content: center; align-items: center;
}
.modal-body {
  background: #1c1c1c;
  padding: 20px;
  border-radius: 8px;
}




// Switch tabs
document.querySelectorAll(".tabs .tab").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tabs .tab").forEach(t=>t.classList.remove("active"));
    btn.classList.add("active");
    document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
    document.getElementById(btn.dataset.tab).classList.add("active");
  });
});

// Create wallet
const createBtn = document.getElementById("createBtn");
if (createBtn) {
  createBtn.addEventListener("click", async () => {
    const res = await fetch("/api/wallets/create", {method:"POST"});
    const data = await res.json();
    if (data.ok) {
      localStorage.setItem("walletId", data.walletId);
      window.location.href = "/dashboard";
    }
  });
}

// Dashboard logic
const walletId = localStorage.getItem("walletId");
async function loadWallet() {
  if (!walletId) return;
  const res = await fetch(`/api/wallets/${walletId}`);
  const data = await res.json();
  if (data.ok) {
    document.getElementById("balance").textContent = data.wallet.balance;
    document.getElementById("transfer").textContent = data.wallet.transferNumber;
  }
}
if (document.body.classList.contains("dashboard")) {
  loadWallet();
  loadProducts();
}

async function loadProducts() {
  const res = await fetch("/api/items");
  const data = await res.json();
  const grid = document.getElementById("itemsGrid");
  grid.innerHTML = "";
  Object.entries(data.items).forEach(([name, item]) => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h4>${name}</h4>
      <p>Price: ${item.price}$</p>
      <p>Available: ${item.quantity}</p>
      <button>Buy</button>
    `;
    card.querySelector("button").addEventListener("click", ()=> openBuyModal(name, item.price));
    grid.appendChild(card);
  });
}

// Modal
const modal = document.getElementById("buyModal");
const qtyInput = document.getElementById("buyQty");
let currentProduct = null;

function openBuyModal(product, price) {
  modal.style.display = "flex";
  currentProduct = product;
}
document.getElementById("cancelBuy").onclick = ()=> modal.style.display = "none";
document.getElementById("confirmBuy").onclick = async ()=>{
  const qty = parseInt(qtyInput.value, 10);
  const res = await fetch("/api/buy", {
    method:"POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ walletId, productName: currentProduct, quantity: qty })
  });
  const data = await res.json();
  if (data.ok) {
    alert("Purchase successful!");
    modal.style.display = "none";
    loadWallet();
    loadProducts();
  } else {
    alert("Error: "+data.error);
  }
};