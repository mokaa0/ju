import tkinter as tk
import requests
import random

# VPS URL – عدله حسب الـ IP تبعك
VPS_URL = "http://YOUR_VPS_IP:7869/upload_tokens"  # ← بدّلها بـ IP الحقيقي

def upload_tokens():
    tokens_raw = text_box.get("1.0", "end").strip()
    tokens = tokens_raw.splitlines()

    if not tokens:
        status_label.config(text="❌ Please enter tokens.", fg="red")
        return

    status_label.config(text="🟡 Connecting valid accounts...", fg="yellow")
    root.update_idletasks()

    try:
        res = requests.post(VPS_URL, json={"tokens": tokens})
        result = res.json()

        valid_count = result.get("count", 0)
        status_label.config(text=f"✅ Loaded {valid_count} tokens.", fg="lime")

        # طباعة حالة كل حساب عشوائي
        states = ["online", "idle", "dnd"]
        for token in tokens[:valid_count]:
            user = f"user_{random.randint(1000, 9999)}"
            state = random.choice(states)
            state_output.insert(tk.END, f"{user}: {state}\n")
            state_output.see("end")

        state_output.insert(tk.END, "\n✅ All Accounts initialized.\n")
    except Exception as e:
        status_label.config(text=f"❌ Failed to send tokens.", fg="red")

# إنشاء نافذة GUI
root = tk.Tk()
root.title("2050 Studio")
root.configure(bg="black")
root.geometry("700x600")

tk.Label(root, text="2050", fg="lime", bg="black", font=("Courier", 40, "bold")).pack(pady=(10, 0))
tk.Label(root, text="2050 Studio - Advanced Status Manager", fg="skyblue", bg="black", font=("Arial", 12)).pack()
tk.Label(root, text="Developed by .884.", fg="yellow", bg="black", font=("Arial", 10)).pack()
tk.Label(root, text="Loading tool...", fg="lime", bg="black", font=("Arial", 10)).pack(pady=(5, 10))

text_box = tk.Text(root, height=10, width=70, bg="white", fg="black", font=("Consolas", 10))
text_box.pack(pady=5)

tk.Button(root, text="Upload Tokens", command=upload_tokens, bg="gray20", fg="white").pack(pady=5)

status_label = tk.Label(root, text="", fg="white", bg="black", font=("Arial", 10))
status_label.pack(pady=5)

state_output = tk.Text(root, height=10, width=70, bg="black", fg="cyan", font=("Consolas", 10))
state_output.pack(pady=5)

root.mainloop()