<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discord Bot Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<style>
  body { background: linear-gradient(135deg,#1f1f1f,#121212); color:white; font-family:sans-serif; }
  .button { transition: all 0.3s; }
  .button:hover { transform: scale(1.05); }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

function App() {
  const [servers, setServers] = useState([]);
  const [selectedServer, setSelectedServer] = useState(null);
  const [prefix, setPrefix] = useState("#");
  const [autoReplies, setAutoReplies] = useState([]);
  const [accessRole, setAccessRole] = useState(null);

  useEffect(() => {
    // fetch servers
    fetch("/api/servers").then(r => r.json()).then(setServers);
  }, []);

  const saveSettings = () => {
    fetch("/api/saveSettings", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ serverId:selectedServer, prefix, accessRole, autoReplies })
    });
    alert("Settings saved!");
  };

  return (
    <div className="p-8">
      <h1 className="text-4xl font-bold mb-6">Discord Bot Dashboard</h1>
      <div className="mb-4">
        <h2 className="text-xl font-semibold">Servers</h2>
        {servers.map(s => (
          <button key={s.id} className="m-1 px-3 py-1 bg-gray-700 rounded button" onClick={()=>setSelectedServer(s.id)}>
            {s.name}
          </button>
        ))}
      </div>
      {selectedServer && (
        <div className="mt-6">
          <div className="mb-4">
            <label>Prefix:</label>
            <input className="ml-2 p-1 rounded text-black" value={prefix} onChange={e=>setPrefix(e.target.value)} />
            <button className="ml-2 px-3 py-1 bg-black rounded button" onClick={saveSettings}>Save</button>
          </div>
          <div className="mb-4">
            <label>Access Role:</label>
            <input className="ml-2 p-1 rounded text-black" value={accessRole||""} onChange={e=>setAccessRole(e.target.value)} />
          </div>
          <div className="mb-4">
            <h2 className="text-lg font-semibold">Auto Replies</h2>
            {autoReplies.map((r,i)=>(
              <div key={i} className="mb-2">
                <input placeholder="Short" className="p-1 rounded text-black mr-1" value={r.short} onChange={e=>{const a=[...autoReplies]; a[i].short=e.target.value; setAutoReplies(a)}} />
                <input placeholder="Reply" className="p-1 rounded text-black mr-1" value={r.reply} onChange={e=>{const a=[...autoReplies]; a[i].reply=e.target.value; setAutoReplies(a)}} />
              </div>
            ))}
            <button className="px-3 py-1 bg-gray-700 rounded button" onClick={()=>setAutoReplies([...autoReplies,{short:"",reply:""}])}>+</button>
          </div>
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>